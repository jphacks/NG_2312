# 友達との本の貸し借り管理サービス「LenBow」

![IMAGE ALT TEXT HERE](https://github.com/jphacks/NG_2312/blob/master/images/ServiceImage.png)
- [基本操作動画はこちら](https://drive.google.com/file/d/1VPHbAtzYipJsI83txQl0LWmnsymWu2gj/view?usp=drive_link)
- [バーコードによる本登録動画はこちら](https://drive.google.com/file/d/1fKu589PzIC2lmViIZ1x5hADZy0IHdxTG/view?usp=drive_link)
- [アンケートによるポイントプレゼント機能の動画はこちら](https://drive.google.com/file/d/1QMnA4E4WYVm3zDPt0XbvR1GsGDYSmYNM/view?usp=drive_link)
- [オススメ機能の動画はこちら](https://drive.google.com/file/d/1K7WZeVpPW8Q4YPUDhcAtakAt5wMmfXdx/view?usp=drive_link)

[プロダクトURL(このURLからLINEでbotを友達追加してサービスを利用できます)](https://liff.line.me/1645278921-kWRPP32q/?accountId=263xoaqc)</br>
※ スマホでサービスを利用するようにしてください。PCやタブレット等で操作すると不具合が生じる場合があります。

### LINE Botの友達追加QRコード
![qrcode](https://github.com/jphacks/NG_2312/blob/feature/readme/images/linebot_qr.png)

## 製品概要
### 背景(製品開発のきっかけ、課題等）
学生エンジニアはコミュニティ内で本をお勧めされることはよくあります。</br>
しかしお勧めされても図書館での入手は困難なことが多いです。特に国公立や単科大、高校などは図書館が充実していないことが多く、新しい本や人気の本はすぐに読むことはできないでしょう。だからと言って自分に合うかわからない本に3000円という値段を払うことは学生にとって決して簡単ではありません。</br></br>
そう言った背景から学生はお勧めしたきた人に対してその本を借りるという場面があります。ですがここにも問題があり、貸し借りというのはお互いに管理が大変です。借りている側は返す日が遅れれば友達の信頼を失い、貸している側もなるべく早く返して欲しいけど催促して関係を悪くしたくないですよね。 (僕も友達に「リーダブルコード」を貸したまま当分かえってこず、なかなか催促できないまま私のコードはスパゲッティに…)
そういった悩みに対して、友達との本の貸し借りに特化した管理サービスを考えました。管理サービスはすでに世に存在しますが、アプリインストール、アカウント登録、友達追加といった面倒な操作が多くかえって管理を煩わしくしていると思います。自分がやる分にはまだいいですが、友達にもその手間をさせるのは気が引けますよね。 そういった課題にもアプローチをかけて開発に取り組みました！</br></br>
またLenBowで繋がっている友達が実際に持っている本をbotがお勧めしてくれる機能や本の感想についてアンケートに答えることで貸してくれたお礼として友達にポイントをプレゼントできる機能を実装しました。ポイントは今後本のクーポンや無料券と引き換えれるようにすることを考えています。これらにより友達同士での貸し借りがより加速し、学生でもしっかりと技術書等で勉強できる環境を作ることができます。</br></br>
アンケートのデータや貸し借りそのもののデータを出版社や本の代理店に提供することでマネタイズも考えています！

### 製品説明（具体的な製品の説明）
#### 基本機能説明
1. LINEでのbotの友達追加でサービス開始
2. (本を貸す側) 返してもらう日や貸す本の詳細登録をしQRコードを発行
   ![register-flow](https://github.com/jphacks/NG_2312/blob/feature/readme/images/register.png)
4. (借りる側) QRコードを読み取ることで、貸し借りが成立
   ![borrow-flow](https://github.com/jphacks/NG_2312/blob/feature/readme/images/borrow.png)
6. 返す日になると借りている側にbotから催促の通知がいく
   通知のURLからどんな本を借りていたか詳細を確認できます。
   ![notify-flow](https://github.com/jphacks/NG_2312/blob/feature/readme/images/notify.png)
8. 本が帰ってきたら、返却を完了
   ![return-flow](https://github.com/jphacks/NG_2312/blob/feature/readme/images/return.png)
### 特長
#### 1. 特長1  ログイン操作やアプリインストール、初期設定など面倒なこと一切なく利用が開始できる。
LINE BotやLIFF(LINE Frontend Framework)を使用しているためユーザはインストールやログイン処理などを意識することなくサービスを開始できます。またLINEという馴染みの深いアプリ上でサービスが動作するためユーザは抵抗感なく利用できるようになると考えます。
#### 2. 特長2  簡単数ステップで貸し借りが登録できる
1. 本のキーワードを入れるだけで本の詳細(画像やタイトル、説明)が登録できる
2. 複数の本のバーコードがうつった写真を入力すれば複数同時に本の詳細を登録できる
3. QRコードを発行、読み取りするだけで貸し借り成立

#### 3. 特長3  借りている側に返却催促の通知がbotからくる
返却日になるとbotから催促LINEがくるため、借りている側は返却日を忘れて友達の信頼を失うことはなくなります。貸している側も言い出しづらい催促を代行してくれるため貸し借りを気持ちよくできます。 また通知のURLから借りている本の情報を確認できるため、別の人から借りているものを持ってきてしまった..なんてことも起きません。

#### 4. 特長4  貸してくれた友達へのお礼としてポイントをプレゼントできる
ユーザは特に課金などすることなく、読んだ本の感想についてのアンケートに答えるだけで貸してくれた相手にポイントをプレゼントすることができます。※今後の展望としてポイントを本の購入時に使えるクーポンや無料券と引き換えれるようにすることを考えています。

#### 5. 特長5  botからの本のおすすめ機能
Botが本をお勧めしてくれます。ただ世界にある本をお勧めするのではなく、LenBowで繋がっている友達が実際に持っている本を貸し借りの履歴に基づいてお勧めしてくれます。これまではコミュニティ内での会話からおすすめを聞くことがありましたが、この機能によって会話をせずともどんどんおすすめの本を知ることができ、友達に貸してもらうことができます。</br>
もちろん友達は勝手にお勧めされたくない本などがあると思うのでその公開設定もすることができ安心してサービスを使えます。

### 解決出来ること
- 学生エンジニアが金銭的問題によって勉強不足になる
  - 気軽にエンジニアの友達同士で貸し借りできるようになるのでいろんな技術書と出会えます
- 本を貸し借りした際の借りパク、大幅な延滞
  - 催促通知機能が搭載されており返し忘れを防止します
- 学生コミュニティーの衰退
  - 貸し借りをし、互いに支え合うことで信頼関係が生まれコミュニティの活性化に繋がります。また金銭的問題があっても勉強することが可能な環境を提供できるため、コミュニティの底上げに繋がります
### 今後の展望
- 出版社や本の代理店企業と提携しデータを提供することでマネタイズをはかる
- サービス内で入手したポイントの引き換え機能
- 本返却時のお礼メッセージ機能
- 友達の持っている本の検索機能

### 注力したこと（こだわり等）
* 技術にLIFFを選定し、連携を工夫することでユーザーログインや、アプリのインストール、初期情報登録といった煩わしいユーザーによる操作をなくしました。
* QRコードの生成やQRコード読み取り機能を実装することで貸し借りの登録をより簡単にしました。
* 本の詳細登録をする際、一つ一つ登録するのは面倒であるため、複数の本が写った一枚の写真からそれぞれの本の情報を取得するアルゴリズムを開発。
  ※ 独自技術の項目で詳しく紹介してあります。
* 貸し借りの履歴を使用し、友達が実際に持っている本をBotからお勧めできる機能を実装。

## 開発技術
### 活用した技術
- 画像処理
#### API・データ
- Google Books APIs
- LINE Messaging API

#### フレームワーク・ライブラリ・モジュール
- React
- Next.js
- TailWind
- Prisma
- Supabase
- OpenCV
- LIFF
- FastAPI

#### デバイス

### 独自技術
#### ハッカソンで開発した独自機能・技術
- LIFF(LINE Frontend Framework)と連携し、アプリ起動時の自動ログイン処理 [実装内容](https://github.com/jphacks/NG_2312/commit/2af72e7a5005316d8e30b40fd45dc9e562f40220)
- 複数の本の写真からバーコードを抽出し、本のタイトルや画像といった情報を取得する機能を開発[実装内容](https://github.com/jphacks/NG_2312/commit/97399fabe86dbae2fb06e96be48a52f4f38576c2) </br>
   [実行動画はこちら](https://drive.google.com/file/d/1fKu589PzIC2lmViIZ1x5hADZy0IHdxTG/view?usp=drive_link)</br>
  <b>こだわりポイント</b></br>
  既存のOpenCVライブラリを使用すればある程度大きく写してあるバーコードは認識できます。しかし、画像内に複数のバーコードが写っている場合一つ一つのバーコードが小さくなり認識できないという問題が判明し一気に複数の本情報を取得することは不可能でした。そこで画像から切り出した小領域を検出対象とし、画像の左上部分から小領域の大きさを変えて複数回画像を走査することで、バーコード認識の漏れが少なくなるようにし、本機能を実装しました。バーコード情報取得後はGoogle Books APIsによって本の詳細を取得します。

#### 製品に取り入れた研究内容（データ・ソフトウェアなど）（※アカデミック部門の場合のみ提出必須）
* 
* 
